<project framework="react" backend="nodejs" hasDatabase="true">
<file path="preview.html">
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRM Financeiro - Preview</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            900: '#000000',
                            100: '#ffffff'
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-black text-white min-h-screen">
    <!-- Header -->
    <header class="border-b border-gray-800">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center space-x-4">
                    <div class="w-8 h-8 bg-white rounded-lg flex items-center justify-center">
                        <svg class="w-5 h-5 text-black" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"/>
                        </svg>
                    </div>
                    <h1 class="text-2xl font-bold">CRM Financeiro</h1>
                </div>
                <nav class="hidden md:flex space-x-8">
                    <a href="#" class="text-gray-300 hover:text-white transition">Dashboard</a>
                    <a href="#" class="text-gray-300 hover:text-white transition">Gastos</a>
                    <a href="#" class="text-gray-300 hover:text-white transition">Or√ßamentos</a>
                    <a href="#" class="text-gray-300 hover:text-white transition">Admin</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="relative overflow-hidden">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                <div>
                    <h2 class="text-5xl lg:text-6xl font-bold mb-6">
                        Controle Total <span class="text-gray-400">de</span> Finan√ßas
                    </h2>
                    <p class="text-gray-300 text-lg mb-8">
                        Sistema <strong>completo</strong> de CRM com <strong>dashboards em tempo real</strong>, 
                        <strong>gerenciamento de usu√°rios</strong> e <strong>bando de dados SQL</strong> integrado.
                    </p>
                    <div class="flex flex-col sm:flex-row gap-4">
                        <button class="bg-white text-black px-8 py-3 rounded-lg font-semibold hover:bg-gray-200 transition">
                            Iniciar Sistema
                        </button>
                        <button class="border border-gray-600 text-white px-8 py-3 rounded-lg font-semibold hover:border-white transition">
                            √Årea Administrativa
                        </button>
                    </div>
                </div>
                <div class="relative">
                    <div class="bg-gray-900 border border-gray-800 rounded-2xl p-8">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-xl font-semibold">Vis√£o Geral Financeira</h3>
                            <span class="text-sm text-gray-400">Atualizado em tempo real</span>
                        </div>
                        <div class="space-y-4">
                            <div class="bg-black border border-gray-800 rounded-lg p-4">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <p class="text-gray-400 text-sm">Receita Total</p>
                                        <p class="text-2xl font-bold">R$ 125.000</p>
                                    </div>
                                    <div class="w-12 h-12 bg-white rounded-lg flex items-center justify-center">
                                        <svg class="w-6 h-6 text-black" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M8 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM15 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z"/>
                                            <path d="M3 4a1 1 0 00-1 1v10a1 1 0 001 1h1.05a2.5 2.5 0 014.9 0H10a1 1 0 001-1V5a1 1 0 00-1-1H3zM14 7a1 1 0 00-1 1v6.05A2.5 2.5 0 0115.95 16H17a1 1 0 001-1V8a1 1 0 00-1-1h-3z"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-black border border-gray-800 rounded-lg p-4">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <p class="text-gray-400 text-sm">Despesas</p>
                                        <p class="text-2xl font-bold">R$ 75.200</p>
                                    </div>
                                    <div class="w-12 h-12 bg-white rounded-lg flex items-center justify-center">
                                        <svg class="w-6 h-6 text-black" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4zM18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9zM4 13a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm5-1a1 1 0 100 2h1a1 1 0 100-2H9z"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="border-t border-gray-800">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
            <div class="text-center mb-16">
                <h2 class="text-3xl font-bold mb-4">Recursos Principais</h2>
                <p class="text-gray-400">Tudo que voc√™ precisa para gerenciar sua equipe e finan√ßas</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="bg-gray-900 border border-gray-800 rounded-2xl p-6 hover:border-white transition">
                    <div class="w-12 h-12 bg-white rounded-lg flex items-center justify-center mb-4">
                        <svg class="w-6 h-6 text-black" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M2 10a8 8 0 018-8v8h8a8 8 0 11-16 0z"/>
                            <path d="M12 2.252A8.014 8.014 0 0117.748 8H12V2.252z"/>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">Dashboards em Tempo Real</h3>
                    <p class="text-gray-400">Gr√°ficos <strong>interativos</strong> e atualiza√ß√µes autom√°ticas para monitoramento constante</p>
                </div>
                <div class="bg-gray-900 border border-gray-800 rounded-2xl p-6 hover:border-white transition">
                    <div class="w-12 h-12 bg-white rounded-lg flex items-center justify-center mb-4">
                        <svg class="w-6 h-6 text-black" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">Gest√£o de Usu√°rios</h3>
                    <p class="text-gray-400">Controle <strong>completo</strong> de at√© 20 contas membro com permiss√µes granulares</p>
                </div>
                <div class="bg-gray-900 border border-gray-800 rounded-2xl p-6 hover:border-white transition">
                    <div class="w-12 h-12 bg-white rounded-lg flex items-center justify-center mb-4">
                        <svg class="w-6 h-6 text-black" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm0 2h12v10H4V5z"/>
                            <path d="M6 7h8v2H6V7zm0 3h6v2H6v-2z"/>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">Banco de Dados SQL</h3>
                    <p class="text-gray-400">Armazenamento <strong>seguro</strong> e estruturado com SQLite integrado</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Admin Panel Preview -->
    <section class="border-t border-gray-800">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                <div>
                    <h2 class="text-4xl font-bold mb-6">Painel Administrativo</h2>
                    <p class="text-gray-400 mb-8">
                        Gerencie todas as <strong>20 contas membro</strong> de forma centralizada. 
                        Altere senhas, e-mails e permiss√µes com apenas alguns cliques.
                    </p>
                    <ul class="space-y-3 text-gray-300">
                        <li class="flex items-center space-x-3">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                            </svg>
                            <span>Controle total de usu√°rios</span>
                        </li>
                        <li class="flex items-center space-x-3">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                            </svg>
                            <span>Atualiza√ß√£o autom√°tica no banco de dados</span>
                        </li>
                        <li class="flex items-center space-x-3">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                            </svg>
                            <span>Relat√≥rios e estat√≠sticas</span>
                        </li>
                    </ul>
                </div>
                <div class="bg-gray-900 border border-gray-800 rounded-2xl p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-semibold">Usu√°rios Cadastrados</h3>
                        <span class="text-sm text-gray-400">21 contas</span>
                    </div>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center bg-black border border-gray-800 rounded-lg p-3">
                            <div>
                                <p class="font-semibold">admin@empresa.com</p>
                                <p class="text-xs text-gray-400">Administrador</p>
                            </div>
                            <button class="text-xs bg-white text-black px-3 py-1 rounded">Admin</button>
                        </div>
                        <div class="flex justify-between items-center bg-black border border-gray-800 rounded-lg p-3">
                            <div>
                                <p class="font-semibold">membro01@empresa.com</p>
                                <p class="text-xs text-gray-400">Membro</p>
                            </div>
                            <button class="text-xs border border-gray-600 px-3 py-1 rounded hover:border-white">Editar</button>
                        </div>
                        <div class="flex justify-between items-center bg-black border border-gray-800 rounded-lg p-3">
                            <div>
                                <p class="font-semibold">membro02@empresa.com</p>
                                <p class="text-xs text-gray-400">Membro</p>
                            </div>
                            <button class="text-xs border border-gray-600 px-3 py-1 rounded hover:border-white">Editar</button>
                        </div>
                        <div class="flex justify-between items-center bg-black border border-gray-800 rounded-lg p-3">
                            <div>
                                <p class="font-semibold">membro03@empresa.com</p>
                                <p class="text-xs text-gray-400">Membro</p>
                            </div>
                            <button class="text-xs border border-gray-600 px-3 py-1 rounded hover:border-white">Editar</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="border-t border-gray-800">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="flex items-center space-x-4">
                    <div class="w-8 h-8 bg-white rounded-lg flex items-center justify-center">
                        <svg class="w-5 h-5 text-black" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"/>
                        </svg>
                    </div>
                    <p class="text-gray-400">¬© 2024 CRM Financeiro. Todos os direitos reservados.</p>
                </div>
                <div class="flex space-x-4 mt-4 md:mt-0">
                    <a href="#" class="text-gray-400 hover:text-white transition">Suporte</a>
                    <a href="#" class="text-gray-400 hover:text-white transition">Documenta√ß√£o</a>
                    <a href="#" class="text-gray-400 hover:text-white transition">Contato</a>
                </div>
            </div>
        </div>
    </footer>
</body>
</html>
</file>

<file path="package.json">
{
  "name": "crm-financeiro",
  "version": "1.0.0",
  "description": "Sistema de CRM com dashboards financeiros e gerenciamento de usu√°rios",
  "main": "server/index.js",
  "scripts": {
    "dev": "concurrently \"npm run dev:server\" \"npm run dev:client\"",
    "dev:server": "nodemon server/index.js",
    "dev:client": "cd client && npm run dev",
    "build": "cd client && npm run build",
    "start": "node server/index.js",
    "install:client": "cd client && npm install",
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [
    "crm",
    "financeiro",
    "dashboard",
    "react",
    "nodejs",
    "sqlite"
  ],
  "author": "Seu Nome",
  "license": "MIT",
  "dependencies": {
    "bcryptjs": "^2.4.3",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "express": "^4.18.2",
    "jsonwebtoken": "^9.0.2",
    "sqlite3": "^5.1.7"
  },
  "devDependencies": {
    "concurrently": "^8.2.2",
    "nodemon": "^3.0.2"
  },
  "engines": {
    "node": ">=16.0.0"
  }
}
</file>

<file path="server/database.js">
const sqlite3 = require('sqlite3').verbose();
const bcrypt = require('bcryptjs');
const path = require('path');
const fs = require('fs');

// Caminho para o banco de dados
const dbPath = path.join(__dirname, 'crm.db');

// Cria a pasta do banco de dados se n√£o existir
const dbDir = path.dirname(dbPath);
if (!fs.existsSync(dbDir)) {
    fs.mkdirSync(dbDir, { recursive: true });
}

// Conecta ao banco de dados (cria se n√£o existir)
const db = new sqlite3.Database(dbPath, (err) => {
    if (err) {
        console.error('Erro ao conectar ao banco de dados:', err.message);
    } else {
        console.log('Conectado ao banco de dados SQLite');
        // Inicializa o banco de dados
        initDatabase();
    }
});

// Fun√ß√£o para inicializar o banco de dados
function initDatabase() {
    // Cria tabela de usu√°rios
    db.run(`
        CREATE TABLE IF NOT EXISTS users (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            name TEXT NOT NULL,
            email TEXT UNIQUE NOT NULL,
            password TEXT NOT NULL,
            role TEXT NOT NULL DEFAULT 'member',
            created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
            updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
        )
    `, (err) => {
        if (err) {
            console.error('Erro ao criar tabela users:', err.message);
        } else {
            console.log('Tabela users criada com sucesso');
            // Insere dados iniciais
            insertInitialData();
        }
    });

    // Cria tabela de despesas
    db.run(`
        CREATE TABLE IF NOT EXISTS expenses (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            user_id INTEGER NOT NULL,
            description TEXT NOT NULL,
            amount REAL NOT NULL,
            category TEXT NOT NULL,
            date DATETIME NOT NULL,
            created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
            FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
        )
    `, (err) => {
        if (err) {
            console.error('Erro ao criar tabela expenses:', err.message);
        } else {
            console.log('Tabela expenses criada com sucesso');
        }
    });

    // Cria tabela de or√ßamentos
    db.run(`
        CREATE TABLE IF NOT EXISTS budgets (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            user_id INTEGER NOT NULL,
            category TEXT NOT NULL,
            amount REAL NOT NULL,
            month INTEGER NOT NULL,
            year INTEGER NOT NULL,
            created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
            FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
            UNIQUE(user_id, category, month, year)
        )
    `, (err) => {
        if (err) {
            console.error('Erro ao criar tabela budgets:', err.message);
        } else {
            console.log('Tabela budgets criada com sucesso');
        }
    });
}

// Fun√ß√£o para inserir dados iniciais
function insertInitialData() {
    // Verifica se j√° existe admin
    db.get("SELECT COUNT(*) as count FROM users WHERE role = 'admin'", (err, row) => {
        if (err) {
            console.error('Erro ao verificar admin existente:', err.message);
            return;
        }

        if (row.count === 0) {
            // Cria conta admin
            const adminPassword = bcrypt.hashSync('admin123', 10);
            db.run(
                "INSERT INTO users (name, email, password, role) VALUES (?, ?, ?, ?)",
                ['Administrador', 'admin@empresa.com', adminPassword, 'admin'],
                (err) => {
                    if (err) {
                        console.error('Erro ao criar conta admin:', err.message);
                    } else {
                        console.log('Conta admin criada: admin@empresa.com / admin123');
                    }
                }
            );
        }
    });

    // Verifica se j√° existem membros
    db.get("SELECT COUNT(*) as count FROM users WHERE role = 'member'", (err, row) => {
        if (err) {
            console.error('Erro ao verificar membros existentes:', err.message);
            return;
        }

        if (row.count === 0) {
            // Cria 20 contas membro
            const members = [];
            for (let i = 1; i <= 20; i++) {
                const name = `Membro ${i}`;
                const email = `membro${i.toString().padStart(2, '0')}@empresa.com`;
                const password = bcrypt.hashSync(`senha${i}`, 10);
                members.push([name, email, password, 'member']);
            }

            const stmt = db.prepare(
                "INSERT INTO users (name, email, password, role) VALUES (?, ?, ?, ?)"
            );
            
            members.forEach(member => {
                stmt.run(member, (err) => {
                    if (err) {
                        console.error(`Erro ao criar membro ${member[1]}:`, err.message);
                    }
                });
            });

            stmt.finalize(() => {
                console.log('20 contas membro criadas com sucesso');
                // Insere dados de exemplo
                insertSampleData();
            });
        }
    });
}

// Fun√ß√£o para inserir dados de exemplo
function insertSampleData() {
    // Insere algumas despesas de exemplo
    const sampleExpenses = [
        [1, 'Almo√ßo empresa', 85.50, 'Alimenta√ß√£o', '2024-01-15 12:00:00'],
        [2, 'Combust√≠vel', 350.00, 'Transporte', '2024-01-10 08:00:00'],
        [3, 'Material de escrit√≥rio', 120.00, 'Escrit√≥rio', '2024-01-05 14:00:00'],
        [4, 'Assinatura software', 299.90, 'Tecnologia', '2024-01-01 10:00:00'],
        [5, 'Viagem neg√≥cios', 1200.00, 'Viagens', '2024-01-20 16:00:00'],
        [6, 'Treinamento equipe', 800.00, 'Treinamento', '2024-01-12 09:00:00'],
        [7, 'Internet empresa', 189.90, 'Infraestrutura', '2024-01-03 11:00:00'],
        [8, 'Energia el√©trica', 650.00, 'Infraestrutura', '2024-01-02 13:00:00'],
        [9, 'Marketing digital', 1500.00, 'Marketing', '2024-01-18 15:00:00'],
        [10, 'Manuten√ß√£o equipamentos', 420.00, 'Tecnologia', '2024-01-22 17:00:00']
    ];

    const expenseStmt = db.prepare(
        "INSERT INTO expenses (user_id, description, amount, category, date) VALUES (?, ?, ?, ?, ?)"
    );

    sampleExpenses.forEach(expense => {
        expenseStmt.run(expense, (err) => {
            if (err) {
                console.error('Erro ao inserir despesa de exemplo:', err.message);
            }
        });
    });

    expenseStmt.finalize(() => {
        console.log('Despesas de exemplo inseridas');
    });

    // Insere alguns or√ßamentos de exemplo
    const sampleBudgets = [
        [1, 'Alimenta√ß√£o', 500.00, 1, 2024],
        [1, 'Transporte', 800.00, 1, 2024],
        [2, 'Tecnologia', 1000.00, 1, 2024],
        [2, 'Marketing', 2000.00, 1, 2024],
        [3, 'Viagens', 1500.00, 1, 2024],
        [3, 'Treinamento', 1000.00, 1, 2024]
    ];

    const budgetStmt = db.prepare(
        "INSERT INTO budgets (user_id, category, amount, month, year) VALUES (?, ?, ?, ?, ?)"
    );

    sampleBudgets.forEach(budget => {
        budgetStmt.run(budget, (err) => {
            if (err) {
                console.error('Erro ao inserir or√ßamento de exemplo:', err.message);
            }
        });
    });

    budgetStmt.finalize(() => {
        console.log('Or√ßamentos de exemplo inseridos');
    });
}

// Exporta o objeto db para uso em outros m√≥dulos
module.exports = db;
</file>

<file path="server/routes/auth.js">
const express = require('express');
const bcrypt = require('bcryptjs');
const jwt = require('jsonwebtoken');
const db = require('../database');

const router = express.Router();

// Middleware para verificar token
const authenticateToken = (req, res, next) => {
    const authHeader = req.headers['authorization'];
    const token = authHeader && authHeader.split(' ')[1];

    if (!token) {
        return res.status(401).json({ error: 'Token de autentica√ß√£o necess√°rio' });
    }

    jwt.verify(token, process.env.JWT_SECRET || 'sua_chave_secreta', (err, user) => {
        if (err) {
            return res.status(403).json({ error: 'Token inv√°lido ou expirado' });
        }
        req.user = user;
        next();
    });
};

// Rota de login
router.post('/login', (req, res) => {
    const { email, password } = req.body;

    if (!email || !password) {
        return res.status(400).json({ error: 'Email e senha s√£o obrigat√≥rios' });
    }

    const query = 'SELECT * FROM users WHERE email = ?';
    
    db.get(query, [email], (err, user) => {
        if (err) {
            return res.status(500).json({ error: 'Erro no servidor' });
        }

        if (!user) {
            return res.status(401).json({ error: 'Email ou senha incorretos' });
        }

        bcrypt.compare(password, user.password, (err, result) => {
            if (err) {
                return res.status(500).json({ error: 'Erro no servidor' });
            }

            if (!result) {
                return res.status(401).json({ error: 'Email ou senha incorretos' });
            }

            const token = jwt.sign(
                { id: user.id, email: user.email, role: user.role },
                process.env.JWT_SECRET || 'sua_chave_secreta',
                { expiresIn: '24h' }
            );

            res.json({
                message: 'Login bem-sucedido',
                token,
                user: {
                    id: user.id,
                    name: user.name,
                    email: user.email,
                    role: user.role
                }
            });
        });
    });
});

// Rota para verificar token
router.get('/verify', authenticateToken, (req, res) => {
    res.json({
        valid: true,
        user: req.user
    });
});

// Rota para obter informa√ß√µes do usu√°rio logado
router.get('/me', authenticateToken, (req, res) => {
    const query = 'SELECT id, name, email, role, created_at FROM users WHERE id = ?';
    
    db.get(query, [req.user.id], (err, user) => {
        if (err) {
            return res.status(500).json({ error: 'Erro no servidor' });
        }

        if (!user) {
            return res.status(404).json({ error: 'Usu√°rio n√£o encontrado' });
        }

        res.json(user);
    });
});

module.exports = { router, authenticateToken };
</file>

<file path="server/routes/admin.js">
const express = require('express');
const bcrypt = require('bcryptjs');
const { authenticateToken } = require('./auth');
const db = require('../database');

const router = express.Router();

// Middleware para verificar se √© admin
const requireAdmin = (req, res, next) => {
    if (req.user.role !== 'admin') {
        return res.status(403).json({ error: 'Acesso negado. Permiss√£o de administrador necess√°ria.' });
    }
    next();
};

// Listar todos os usu√°rios (exceto o pr√≥prio admin)
router.get('/users', authenticateToken, requireAdmin, (req, res) => {
    const query = 'SELECT id, name, email, role, created_at, updated_at FROM users WHERE role != "admin" ORDER BY created_at DESC';
    
    db.all(query, [], (err, users) => {
        if (err) {
            return res.status(500).json({ error: 'Erro ao buscar usu√°rios' });
        }
        res.json(users);
    });
});

// Obter informa√ß√µes de um usu√°rio espec√≠fico
router.get('/users/:id', authenticateToken, requireAdmin, (req, res) => {
    const { id } = req.params;
    
    const query = 'SELECT id, name, email, role, created_at, updated_at FROM users WHERE id = ? AND role != "admin"';
    
    db.get(query, [id], (err, user) => {
        if (err) {
            return res.status(500).json({ error: 'Erro ao buscar usu√°rio' });
        }

        if (!user) {
            return res.status(404).json({ error: 'Usu√°rio n√£o encontrado' });
        }

        res.json(user);
    });
});

// Atualizar email de um usu√°rio
router.put('/users/:id/email', authenticateToken, requireAdmin, (req, res) => {
    const { id } = req.params;
    const { email } = req.body;

    if (!email) {
        return res.status(400).json({ error: 'Email √© obrigat√≥rio' });
    }

    // Verifica se o email j√° est√° em uso
    db.get('SELECT id FROM users WHERE email = ? AND id != ?', [email, id], (err, existingUser) => {
        if (err) {
            return res.status(500).json({ error: 'Erro ao verificar email' });
        }

        if (existingUser) {
            return res.status(400).json({ error: 'Email j√° est√° em uso' });
        }

        // Atualiza o email
        db.run(
            'UPDATE users SET email = ?, updated_at = CURRENT_TIMESTAMP WHERE id = ? AND role != "admin"',
            [email, id],
            function(err) {
                if (err) {
                    return res.status(500).json({ error: 'Erro ao atualizar email' });
                }

                if (this.changes === 0) {
                    return res.status(404).json({ error: 'Usu√°rio n√£o encontrado' });
                }

                res.json({ message: 'Email atualizado com sucesso' });
            }
        );
    });
});

// Atualizar senha de um usu√°rio
router.put('/users/:id/password', authenticateToken, requireAdmin, (req, res) => {
    const { id } = req.params;
    const { password } = req.body;

    if (!password) {
        return res.status(400).json({ error: 'Senha √© obrigat√≥ria' });
    }

    if (password.length < 6) {
        return res.status(400).json({ error: 'A senha deve ter pelo menos 6 caracteres' });
    }

    const hashedPassword = bcrypt.hashSync(password, 10);

    db.run(
        'UPDATE users SET password = ?, updated_at = CURRENT_TIMESTAMP WHERE id = ? AND role != "admin"',
        [hashedPassword, id],
        function(err) {
            if (err) {
                return res.status(500).json({ error: 'Erro ao atualizar senha' });
            }

            if (this.changes === 0) {
                return res.status(404).json({ error: 'Usu√°rio n√£o encontrado' });
            }

            res.json({ message: 'Senha atualizada com sucesso' });
        }
    );
});

// Excluir usu√°rio
router.delete('/users/:id', authenticateToken, requireAdmin, (req, res) => {
    const { id } = req.params;

    db.run(
        'DELETE FROM users WHERE id = ? AND role != "admin"',
        [id],
        function(err) {
            if (err) {
                return res.status(500).json({ error: 'Erro ao excluir usu√°rio' });
            }

            if (this.changes === 0) {
                return res.status(404).json({ error: 'Usu√°rio n√£o encontrado' });
            }

            res.json({ message: 'Usu√°rio exclu√≠do com sucesso' });
        }
    );
});

// Obter estat√≠sticas gerais
router.get('/stats', authenticateToken, requireAdmin, (req, res) => {
    const stats = {};

    // Total de usu√°rios membros
    db.get('SELECT COUNT(*) as total FROM users WHERE role = "member"', (err, row) => {
        if (err) {
            return res.status(500).json({ error: 'Erro ao buscar estat√≠sticas' });
        }
        stats.totalMembers = row.total;

        // Total de despesas
        db.get('SELECT COUNT(*) as total FROM expenses', (err, row) => {
            if (err) {
                return res.status(500).json({ error: 'Erro ao buscar estat√≠sticas' });
            }
            stats.totalExpenses = row.total;

            // Total de or√ßamentos
            db.get('SELECT COUNT(*) as total FROM budgets', (err, row) => {
                if (err) {
                    return res.status(500).json({ error: 'Erro ao buscar estat√≠sticas' });
                }
                stats.totalBudgets = row.total;

                // Valor total das despesas
                db.get('SELECT SUM(amount) as total FROM expenses', (err, row) => {
                    if (err) {
                        return res.status(500).json({ error: 'Erro ao buscar estat√≠sticas' });
                    }
                    stats.totalAmount = row.total || 0;

                    res.json(stats);
                });
            });
        });
    });
});

module.exports = router;
</file>

<file path="server/routes/finance.js">
const express = require('express');
const { authenticateToken } = require('./auth');
const db = require('../database');

const router = express.Router();

// Listar despesas do usu√°rio
router.get('/expenses', authenticateToken, (req, res) => {
    const { limit = 50, offset = 0 } = req.query;
    
    const query = `
        SELECT e.*, u.name as user_name 
        FROM expenses e 
        JOIN users u ON e.user_id = u.id 
        WHERE e.user_id = ? 
        ORDER BY e.date DESC 
        LIMIT ? OFFSET ?
    `;
    
    db.all(query, [req.user.id, parseInt(limit), parseInt(offset)], (err, expenses) => {
        if (err) {
            return res.status(500).json({ error: 'Erro ao buscar despesas' });
        }
        res.json(expenses);
    });
});

// Adicionar despesa
router.post('/expenses', authenticateToken, (req, res) => {
    const { description, amount, category, date } = req.body;

    if (!description || !amount || !category || !date) {
        return res.status(400).json({ error: 'Todos os campos s√£o obrigat√≥rios' });
    }

    const query = `
        INSERT INTO expenses (user_id, description, amount, category, date)
        VALUES (?, ?, ?, ?, ?)
    `;

    db.run(query, [req.user.id, description, parseFloat(amount), category, date], function(err) {
        if (err) {
            return res.status(500).json({ error: 'Erro ao adicionar despesa' });
        }

        res.json({
            message: 'Despesa adicionada com sucesso',
            expenseId: this.lastID
        });
    });
});

// Atualizar despesa
router.put('/expenses/:id', authenticateToken, (req, res) => {
    const { id } = req.params;
    const { description, amount, category, date } = req.body;

    const query = `
        UPDATE expenses 
        SET description = ?, amount = ?, category = ?, date = ?, created_at = CURRENT_TIMESTAMP
        WHERE id = ? AND user_id = ?
    `;

    db.run(query, [description, parseFloat(amount), category, date, id, req.user.id], function(err) {
        if (err) {
            return res.status(500).json({ error: 'Erro ao atualizar despesa' });
        }

        if (this.changes === 0) {
            return res.status(404).json({ error: 'Despesa n√£o encontrada' });
        }

        res.json({ message: 'Despesa atualizada com sucesso' });
    });
});

// Excluir despesa
router.delete('/expenses/:id', authenticateToken, (req, res) => {
    const { id } = req.params;

    db.run('DELETE FROM expenses WHERE id = ? AND user_id = ?', [id, req.user.id], function(err) {
        if (err) {
            return res.status(500).json({ error: 'Erro ao excluir despesa' });
        }

        if (this.changes === 0) {
            return res.status(404).json({ error: 'Despesa n√£o encontrada' });
        }

        res.json({ message: 'Despesa exclu√≠da com sucesso' });
    });
});

// Listar or√ßamentos do usu√°rio
router.get('/budgets', authenticateToken, (req, res) => {
    const query = `
        SELECT * FROM budgets 
        WHERE user_id = ? 
        ORDER BY year DESC, month DESC
    `;
    
    db.all(query, [req.user.id], (err, budgets) => {
        if (err) {
            return res.status(500).json({ error: 'Erro ao buscar or√ßamentos' });
        }
        res.json(budgets);
    });
});

// Adicionar or√ßamento
router.post('/budgets', authenticateToken, (req, res) => {
    const { category, amount, month, year } = req.body;

    if (!category || !amount || !month || !year) {
        return res.status(400).json({ error: 'Todos os campos s√£o obrigat√≥rios' });
    }

    const query = `
        INSERT INTO budgets (user_id, category, amount, month, year)
        VALUES (?, ?, ?, ?, ?)
    `;

    db.run(query, [req.user.id, category, parseFloat(amount), parseInt(month), parseInt(year)], function(err) {
        if (err) {
            return res.status(500).json({ error: 'Erro ao adicionar or√ßamento' });
        }

        res.json({
            message: 'Or√ßamento adicionado com sucesso',
            budgetId: this.lastID
        });
    });
});

// Dashboard - Resumo financeiro
router.get('/dashboard', authenticateToken, (req, res) => {
    const dashboard = {};

    // Total de despesas do m√™s atual
    const currentMonth = new Date().getMonth() + 1;
    const currentYear = new Date().getFullYear();

    db.get(`
        SELECT SUM(amount) as total 
        FROM expenses 
        WHERE user_id = ? AND strftime('%m', date) = ? AND strftime('%Y', date) = ?
    `, [req.user.id, currentMonth.toString().padStart(2, '0'), currentYear], (err, row) => {
        if (err) {
            return res.status(500).json({ error: 'Erro ao buscar dados do dashboard' });
        }
        dashboard.monthlyExpenses = row.total || 0;

        // Total de despesas do ano atual
        db.get(`
            SELECT SUM(amount) as total 
            FROM expenses 
            WHERE user_id = ? AND strftime('%Y', date) = ?
        `, [req.user.id, currentYear], (err, row) => {
            if (err) {
                return res.status(500).json({ error: 'Erro ao buscar dados do dashboard' });
            }
            dashboard.yearlyExpenses = row.total || 0;

            // Despesas por categoria (m√™s atual)
            db.all(`
                SELECT category, SUM(amount) as total
                FROM expenses 
                WHERE user_id = ? AND strftime('%m', date) = ? AND strftime('%Y', date) = ?
                GROUP BY category
                ORDER BY total DESC
            `, [req.user.id, currentMonth.toString().padStart(2, '0'), currentYear], (err, categories) => {
                if (err) {
                    return res.status(500).json({ error: 'Erro ao buscar dados do dashboard' });
                }
                dashboard.expensesByCategory = categories || [];

                // Comparativo mensal (√∫ltimos 6 meses)
                db.all(`
                    SELECT 
                        strftime('%m/%Y', date) as month,
                        SUM(amount) as total
                    FROM expenses 
                    WHERE user_id = ? AND date >= date('now', '-6 months')
                    GROUP BY strftime('%Y-%m', date)
                    ORDER BY month DESC
                    LIMIT 6
                `, [req.user.id], (err, monthly) => {
                    if (err) {
                        return res.status(500).json({ error: 'Erro ao buscar dados do dashboard' });
                    }
                    dashboard.monthlyComparison = monthly || [];

                    res.json(dashboard);
                });
            });
        });
    });
});

module.exports = router;
</file>

<file path="server/index.js">
require('dotenv').config();
const express = require('express');
const cors = require('cors');
const path = require('path');

const { router: authRoutes, authenticateToken } = require('./routes/auth');
const adminRoutes = require('./routes/admin');
const financeRoutes = require('./routes/finance');
const db = require('./database');

const app = express();
const PORT = process.env.PORT || 3001;

// Configura√ß√£o CORS
app.use(cors({
    origin: ['http://localhost:3000', 'http://127.0.0.1:3000'],
    credentials: true
}));

// Middleware
app.use(express.json());
app.use(express.urlencoded({ extended: true }));

// Servir arquivos est√°ticos do cliente (quando constru√≠do)
app.use(express.static(path.join(__dirname, '../client/dist')));

// Rotas da API
app.use('/api/auth', authRoutes);
app.use('/api/admin', adminRoutes);
app.use('/api/finance', financeRoutes);

// Rota para servir o frontend React (desenvolvimento)
app.get('/', (req, res) => {
    res.sendFile(path.join(__dirname, '../client/dist/index.html'));
});

// Rota para health check
app.get('/api/health', (req, res) => {
    res.json({ 
        status: 'online', 
        message: 'Servidor CRM Financeiro est√° funcionando',
        timestamp: new Date().toISOString()
    });
});

// Tratamento de erros
app.use((err, req, res, next) => {
    console.error(err.stack);
    res.status(500).json({ 
        error: 'Ocorreu um erro no servidor',
        message: err.message 
    });
});

// Inicia o servidor
app.listen(PORT, () => {
    console.log(`\nüöÄ Servidor iniciado na porta ${PORT}`);
    console.log(`üì° API dispon√≠vel em: http://localhost:${PORT}/api`);
    console.log(`üìä Health check: http://localhost:${PORT}/api/health`);
    console.log(`üìÑ Documenta√ß√£o: http://localhost:${PORT}/api/docs`);
    console.log(`\n‚úÖ Banco de dados SQLite: ${path.join(__dirname, 'crm.db')}`);
    console.log(`üîê Conta admin: admin@empresa.com / admin123`);
    console.log(`üë• 20 contas membro criadas automaticamente\n`);
});

module.exports = app;
</file>

<file path="client/package.json">
{
  "name": "crm-financeiro-client",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview"
  },
  "dependencies": {
    "chart.js": "^4.4.1",
    "react": "^18.2.0",
    "react-chartjs-2": "^5.2.0",
    "react-dom": "^18.2.0"
  },
  "devDependencies": {
    "@types/react": "^18.2.66",
    "@types/react-dom": "^18.2.22",
    "@vitejs/plugin-react": "^4.2.1",
    "autoprefixer": "^10.4.19",
    "postcss": "^8.4.38",
    "tailwindcss": "^3.4.3",
    "vite": "^5.2.0"
  }
}
</file>

<file path="client/vite.config.js">
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

export default defineConfig({
  plugins: [react()],
  server: {
    port: 3000,
    proxy: {
      '/api': {
        target: 'http://localhost:3001',
        changeOrigin: true,
      }
    }
  },
  build: {
    outDir: '../server/client/dist'
  }
})
</file>

<file path="client/src/main.jsx">
import React from 'react'
import ReactDOM from 'react-dom/client'
import App from './App.jsx'
import './index.css'

ReactDOM.createRoot(document.getElementById('root')).render(
  <React.StrictMode>
    <App />
  </React.StrictMode>,
)
</file>

<file path="client/src/index.css">
@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  color-scheme: dark;
}

* {
  scrollbar-width: thin;
  scrollbar-color: #374151 transparent;
}

*::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

*::-webkit-scrollbar-track {
  background: #111827;
}

*::-webkit-scrollbar-thumb {
  background-color: #374151;
  border-radius: 20px;
}

body {
  margin: 0;
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, 'Helvetica Neue', Arial, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';
  background-color: #000000;
  color: #ffffff;
}

input, textarea, select, button {
  font-family: inherit;
}

.chart-container {
  position: relative;
  height: 300px;
  width: 100%;
}

.table-container {
  max-height: 400px;
  overflow-y: auto;
}

.status-active {
  color: #10b981;
}

.status-inactive {
  color: #ef4444;
}
</file>

<file path="client/src/App.jsx">
import React, { useState, useEffect } from 'react'
import { BrowserRouter as Router, Routes, Route, Navigate, useLocation } from 'react-router-dom'
import { Toaster } from 'react-hot-toast'

// Componentes
import Login from './components/Login'
import Dashboard from './components/Dashboard'
import AdminPanel from './components/AdminPanel'
import Profile from './components/Profile'
import Navbar from './components/Navbar'
import Sidebar from './components/Sidebar'

// Hooks
import useAuth from './hooks/useAuth'

function AppContent() {
  const { user, loading } = useAuth()
  const location = useLocation()
  const [sidebarOpen, setSidebarOpen] = useState(false)

  const isAuthRoute = location.pathname === '/login'

  if (loading) {
    return (
      <div className="min-h-screen bg-black flex items-center justify-center">
        <div className="text-center">
          <div className="w-12 h-12 border-4 border-gray-800 border-t-white rounded-full animate-spin mx-auto"></div>
          <p className="mt-4 text-gray-400">Carregando...</p>
        </div>
      </div>
    )
  }

  return (
    <div className="flex min-h-screen bg-black">
      <Toaster
        position="top-right"
        toastOptions={{
          duration: 4000,
          style: {
            background: '#111827',
            color: '#ffffff',
            border: '1px solid #374151'
          },
          success: {
            duration: 3000,
          },
          error: {
            duration: 5000,
          },
        }}
      />
      
      {!isAuthRoute && user && (
        <Sidebar 
          open={sidebarOpen} 
          onClose={() => setSidebarOpen(false)}
          user={user}
        />
      )}
      
      <div className="flex-1 flex flex-col">
        {!isAuthRoute && user && (
          <Navbar 
            user={user}
            onMenuClick={() => setSidebarOpen(true)}
          />
        )}
        
        <main className="flex-1 overflow-auto">
          <Routes>
            <Route path="/login" element={
              user ? <Navigate to="/" replace /> : <Login />
            } />
            <Route path="/" element={
              !user ? <Navigate to="/login" replace /> : <Dashboard />
            } />
            <Route path="/admin" element={
              !user || user.role !== 'admin' ? <Navigate to="/login" replace /> : <AdminPanel />
            } />
            <Route path="/profile" element={
              !user ? <Navigate to="/login" replace /> : <Profile />
            } />
            <Route path="*" element={<Navigate to="/" replace />} />
          </Routes>
        </main>
      </div>
    </div>
  )
}

function App() {
  return (
    <Router>
      <AppContent />
    </Router>
  )
}

export default App
</file>

<file path="client/src/hooks/useAuth.js">
import { useState, useEffect, useContext, createContext } from 'react'
import { api } from '../services/api'

const AuthContext = createContext({})

export function useAuth() {
  return useContext(AuthContext)
}

export function AuthProvider({ children }) {
  const [user, setUser] = useState(null)
  const [loading, setLoading] = useState(true)

  useEffect(() => {
    checkAuth()
  }, [])

  const checkAuth = async () => {
    try {
      const token = localStorage.getItem('token')
      if (!token) {
        setLoading(false)
        return
      }

      const response = await api.get('/auth/verify')
      if (response.data.valid) {
        setUser(response.data.user)
      }
    } catch (error) {
      localStorage.removeItem('token')
    } finally {
      setLoading(false)
    }
  }

  const login = async (email, password) => {
    try {
      const response = await api.post('/auth/login', { email, password })
      const { token, user } = response.data
      
      localStorage.setItem('token', token)
      setUser(user)
      return { success: true }
    } catch (error) {
      return { 
        success: false, 
        error: error.response?.data?.error || 'Erro ao fazer login' 
      }
    }
  }

  const logout = () => {
    localStorage.removeItem('token')
    setUser(null)
  }

  const value = {
    user,
    loading,
    login,
    logout,
    checkAuth
  }

  return (
    <AuthContext.Provider value={value}>
      {children}
    </AuthContext.Provider>
  )
}
</file>

<file path="client/src/services/api.js">
import axios from 'axios'

const api = axios.create({
  baseURL: '/api',
  headers: {
    'Content-Type': 'application/json',
  },
})

// Interceptor para adicionar token em todas as requisi√ß√µes
api.interceptors.request.use(
  (config) => {
    const token = localStorage.getItem('token')
    if (token) {
      config.headers.Authorization = `Bearer ${token}`
    }
    return config
  },
  (error) => {
    return Promise.reject(error)
  }
)

// Interceptor para tratar respostas de erro
api.interceptors.response.use(
  (response) => response,
  (error) => {
    if (error.response?.status === 401) {
      localStorage.removeItem('token')
      window.location.href = '/login'
    }
    return Promise.reject(error)
  }
)

export { api }
</file>

<file path="client/src/components/Login.jsx">
import React, { useState } from 'react'
import { useAuth } from '../hooks/useAuth'
import { toast } from 'react-hot-toast'

function Login() {
  const [formData, setFormData] = useState({
    email: '',
    password: ''
  })
  const [loading, setLoading] = useState(false)
  const { login } = useAuth()

  const handleChange = (e) => {
    setFormData({
      ...formData,
      [e.target.name]: e.target.value
    })
  }

  const handleSubmit = async (e) => {
    e.preventDefault()
    setLoading(true)

    const result = await login(formData.email, formData.password)
    
    if (result.success) {
      toast.success('Login realizado com sucesso!')
    } else {
      toast.error(result.error)
    }

    setLoading(false)
  }

  return (
    <div className="min-h-screen bg-black flex items-center justify-center px-4">
      <div className="max-w-md w-full space-y-8">
        <div className="text-center">
          <div className="w-16 h-16 bg-white rounded-2xl mx-auto flex items-center justify-center mb-4">
            <svg className="w-8 h-8 text-black" fill="currentColor" viewBox="0 0 20 20">
              <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"/>
            </svg>
          </div>
          <h2 className="text-3xl font-bold text-white">CRM Financeiro</h2>
          <p className="mt-2 text-gray-400">Fa√ßa login para acessar o sistema</p>
        </div>

        <div className="bg-gray-900 border border-gray-800 rounded-2xl p-6">
          <form onSubmit={handleSubmit} className="space-y-6">
            <div>
              <label htmlFor="email" className="block text-sm font-medium text-gray-300 mb-2">
                Email
              </label>
              <input
                id="email"
                name="email"
                type="email"
                required
                value={formData.email}
                onChange={handleChange}
                className="w-full px-3 py-3 bg-black border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-white focus:border-transparent"
                placeholder="seu@email.com"
              />
            </div>

            <div>
              <label htmlFor="password" className="block text-sm font-medium text-gray-300 mb-2">
                Senha
              </label>
              <input
                id="password"
                name="password"
                type="password"
                required
                value={formData.password}
                onChange={handleChange}
                className="w-full px-3 py-3 bg-black border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-white focus:border-transparent"
                placeholder="Sua senha"
              />
            </div>

            <div className="flex items-center justify-between">
              <div className="flex items-center">
                <input
                  id="remember-me"
                  name="remember-me"
                  type="checkbox"
                  className="h-4 w-4 text-white focus:ring-white border-gray-600 rounded bg-black"
                />
                <label htmlFor="remember-me" className="ml-2 block text-sm text-gray-300">
                  Lembrar-me
                </label>
              </div>

              <div className="text-sm">
                <a href="#" className="text-gray-400 hover:text-white transition">
                  Esqueceu a senha?
                </a>
              </div>
            </div>

            <button
              type="submit"
              disabled={loading}
              className="w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-black bg-white font-semibold hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-white disabled:opacity-50 disabled:cursor-not-allowed transition"
            >
              {loading ? (
                <div className="flex items-center space-x-2">
                  <div className="w-4 h-4 border-2 border-black border-t-white rounded-full animate-spin"></div>
                  <span>Entrando...</span>
                </div>
              ) : (
                'Entrar'
              )}
            </button>
          </form>

          <div className="mt-6 text-center">
            <p className="text-xs text-gray-400">
              Dados de login pr√©-configurados:
            </p>
            <div className="mt-2 text-xs text-gray-500">
              <p><strong>Admin:</strong> admin@empresa.com / admin123</p>
              <p><strong>Membro:</strong> membro01@empresa.com / senha1</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  )
}

export default Login
</file>

<file path="client/src/components/Navbar.jsx">
import React from 'react'
import { useAuth } from '../hooks/useAuth'
import { api } from '../services/api'

function Navbar({ user, onMenuClick }) {
  const { logout } = useAuth()

  const handleLogout = async () => {
    try {
      await api.post('/auth/logout')
    } catch (error) {
      // Ignora erro de logout
    } finally {
      logout()
    }
  }

  return (
    <nav className="border-b border-gray-800 bg-black/50 backdrop-blur-sm sticky top-0 z-50">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div className="flex justify-between items-center h-16">
          <div className="flex items-center space-x-4">
            <button
              onClick={onMenuClick}
              className="md:hidden p-2 rounded-lg hover:bg-gray-800 transition"
            >
              <svg className="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                <path fillRule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clipRule="evenodd"/>
              </svg>
            </button>
            <div className="w-8 h-8 bg-white rounded-lg flex items-center justify-center">
              <svg className="w-5 h-5 text-black" fill="currentColor" viewBox="0 0 20 20">
                <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"/>
              </svg>
            </div>
            <h1 className="text-xl font-bold">CRM Financeiro</h1>
          </div>

          <div className="hidden md:flex space-x-8">
            <a href="#" className="text-gray-300 hover:text-white transition">Dashboard</a>
            <a href="#" className="text-gray-300 hover:text-white transition">Gastos</a>
            <a href="#" className="text-gray-300 hover:text-white transition">Or√ßamentos</a>
            {user.role === 'admin' && (
              <a href="/admin" className="text-gray-300 hover:text-white transition">Admin</a>
            )}
          </div>

          <div className="flex items-center space-x-4">
            <a href="/profile" className="flex items-center space-x-2 text-gray-300 hover:text-white transition">
              <div className="w-8 h-8 bg-gray-800 rounded-full flex items-center justify-center">
                <span className="text-sm font-semibold">
                  {user.name.split(' ').map(n => n[0]).join('').toUpperCase()}
                </span>
              </div>
              <span className="hidden sm:inline text-sm">{user.name}</span>
            </a>
            
            <button
              onClick={handleLogout}
              className="flex items-center space-x-2 text-gray-300 hover:text-white transition"
            >
              <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                <path fillRule="evenodd" d="M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z" clipRule="evenodd"/>
              </svg>
              <span className="hidden sm:inline">Sair</span>
            </button>
          </div>
        </div>
      </div>
    </nav>
  )
}

export default Navbar
</file>

<file path="client/src/components/Sidebar.jsx">
import React from 'react'
import { Link, useLocation } from 'react-router-dom'
import { useAuth } from '../hooks/useAuth'

function Sidebar({ open, onClose, user }) {
  const location = useLocation()

  const menuItems = [
    { name: 'Dashboard', path: '/', icon: 'üìä' },
    { name: 'Gastos', path: '/expenses', icon: 'üí∏' },
    { name: 'Or√ßamentos', path: '/budgets', icon: 'üí∞' },
    { name: 'Perfil', path: '/profile', icon: 'üë§' },
  ]

  return (
    <>
      {/* Overlay */}
      {open && (
        <div 
          className="fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden"
          onClick={onClose}
        />
      )}

      {/* Sidebar */}
      <aside className={`fixed left-0 top-0 h-full w-64 bg-gray-900 border-r border-gray-800 z-50 transform transition-transform duration-300 ease-in-out ${open ? 'translate-x-0' : '-translate-x-full'} md:translate-x-0`}>
        <div className="flex flex-col h-full">
          {/* Header */}
          <div className="flex items-center justify-between p-6 border-b border-gray-800">
            <div className="flex items-center space-x-3">
              <div className="w-10 h-10 bg-white rounded-lg flex items-center justify-center">
                <svg className="w-6 h-6 text-black" fill="currentColor" viewBox="0 0 20 20">
                  <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"/>
                </svg>
              </div>
              <div>
                <h2 className="font-bold">CRM Financeiro</h2>
                <p className="text-xs text-gray-400">Vers√£o 1.0</p>
              </div>
            </div>
            <button 
              onClick={onClose}
              className="md:hidden p-2 rounded-lg hover:bg-gray-800 transition"
            >
              <svg className="w-5 h-5 text-gray-400" fill="currentColor" viewBox="0 0 20 20">
                <path fillRule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clipRule="evenodd"/>
              </svg>
            </button>
          </div>

          {/* User Info */}
          <div className="p-6 border-b border-gray-800">
            <div className="flex items-center space-x-3">
              <div className="w-12 h-12 bg-gray-800 rounded-full flex items-center justify-center">
                <span className="text-lg font-semibold">
                  {user.name.split(' ').map(n => n[0]).join('').toUpperCase()}
                </span>
              </div>
              <div>
                <h3 className="font-semibold">{user.name}</h3>
                <p className="text-sm text-gray-400">{user.email}</p>
                <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold ${
                  user.role === 'admin' ? 'bg-purple-100 text-purple-800' : 'bg-green-100 text-green-800'
                }`}>
                  {user.role === 'admin' ? 'Administrador' : 'Membro'}
                </span>
              </div>
            </div>
          </div>

          {/* Menu */}
          <nav className="flex-1 overflow-y-auto py-4">
            <div className="space-y-1 px-3">
              {menuItems.map((item) => (
                <Link
                  key={item.path}
                  to={item.path}
                  onClick={onClose}
                  className={`flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-gray-800 transition ${
                    location.pathname === item.path ? 'bg-gray-800 text-white' : ''
                  }`}
                >
                  <span className="text-lg">{item.icon}</span>
                  <span>{item.name}</span>
                </Link>
              ))}

              {user.role === 'admin' && (
                <div className="border-t border-gray-800 mt-4 pt-4">
                  <h3 className="px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider">Administra√ß√£o</h3>
                  <Link
                    to="/admin"
                    onClick={onClose}
                    className={`flex items-center space-x-3 px-3 py-2 mt-2 rounded-lg text-gray-300 hover:bg-gray-800 transition ${
                      location.pathname === '/admin' ? 'bg-gray-800 text-white' : ''
                    }`}
                  >
                    <span className="text-lg">üõ†Ô∏è</span>
                    <span>Painel Admin</span>
                  </Link>
                </div>
              )}
            </div>
          </nav>

          {/* Footer */}
          <div className="p-4 border-t border-gray-800">
            <div className="text-xs text-gray-400 text-center">
              ¬© 2024 CRM Financeiro
              <br />
              Todos os direitos reservados
            </div>
          </div>
        </div>
      </aside>
    </>
  )
}

export default Sidebar
</file>

<file path="client/src/components/Dashboard.jsx">
import React, { useState, useEffect } from 'react'
import { Chart as ChartJS, CategoryScale, LinearScale, PointElement, LineElement, BarElement, ArcElement, Title, Tooltip, Legend } from 'chart.js'
import { Line, Bar, Doughnut } from 'react-chartjs-2'
import { api } from '../services/api'
import { toast } from 'react-hot-toast'

ChartJS.register(
  CategoryScale,
  LinearScale,
  PointElement,
  LineElement,
  BarElement,
  ArcElement,
  Title,
  Tooltip,
  Legend
)

function Dashboard() {
  const [dashboard, setDashboard] = useState(null)
  const [loading, setLoading] = useState(true)
  const [selectedMonth, setSelectedMonth] = useState(new Date().getMonth() + 1)
  const [selectedYear, setSelectedYear] = useState(new Date().getFullYear())

  useEffect(() => {
    loadDashboard()
  }, [selectedMonth, selectedYear])

  const loadDashboard = async () => {
    try {
      setLoading(true)
      const response = await api.get('/finance/dashboard')
      setDashboard(response.data)
    } catch (error) {
      toast.error('Erro ao carregar dashboard')
    } finally {
      setLoading(false)
    }
  }

  const lineChartData = {
    labels: dashboard?.monthlyComparison?.map(item => item.month).reverse() || [],
    datasets: [
      {
        label: 'Despesas Mensais',
        data: dashboard?.monthlyComparison?.map(item => item.total).reverse() || [],
        borderColor: 'rgb(255, 255, 255)',
        backgroundColor: 'rgba(255, 255, 255, 0.1)',
        tension: 0.4,
        fill: true,
      },
    ],
  }

  const barChartData = {
    labels: dashboard?.expensesByCategory?.map(item => item.category) || [],
    datasets: [
      {
        label: 'Despesas por Categoria',
        data: dashboard?.expensesByCategory?.map(item => item.total) || [],
        backgroundColor: [
          'rgba(255, 255, 255, 0.8)',
          'rgba(255, 255, 255, 0.7)',
          'rgba(255, 255, 255, 0.6)',
          'rgba(255, 255, 255, 0.5)',
          'rgba(255, 255, 255, 0.4)',
        ],
        borderColor: [
          'rgba(0, 0, 0, 1)',
          'rgba(0, 0, 0, 1)',
          'rgba(0, 0, 0, 1)',
          'rgba(0, 0, 0, 1)',
          'rgba(0, 0, 0, 1)',
        ],
        borderWidth: 2,
      },
    ],
  }

  const doughnutChartData = {
    labels: ['Alimenta√ß√£o', 'Transporte', 'Tecnologia', 'Marketing', 'Outros'],
    datasets: [
      {
        data: [25, 20, 20, 15, 20],
        backgroundColor: [
          'rgba(255, 255, 255, 0.9)',
          'rgba(255, 255, 255, 0.7)',
          'rgba(255, 255, 255, 0.5)',
          'rgba(255, 255, 255, 0.3)',
          'rgba(255, 255, 255, 0.1)',
        ],
        borderColor: 'rgba(0, 0, 0, 1)',
        borderWidth: 2,
      },
    ],
  }

  const chartOptions = {
    responsive: true,
    plugins: {
      legend: {
        labels: {
          color: '#ffffff',
        },
      },
      tooltip: {
        mode: 'index',
        intersect: false,
      },
    },
    scales: {
      y: {
        beginAtZero: true,
        grid: {
          color: 'rgba(255, 255, 255, 0.1)',
        },
        ticks: {
          color: '#ffffff',
        },
      },
      x: {
        grid: {
          display: false,
        },
        ticks: {
          color: '#ffffff',
        },
      },
    },
  }

  return (
    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <div className="flex flex-col sm:flex-row justify-between items-center mb-8">
        <div>
          <h1 className="text-3xl font-bold">Dashboard Financeiro</h1>
          <p className="text-gray-400 mt-1">Vis√£o geral das finan√ßas em tempo real</p>
        </div>
        
        <div className="flex items-center space-x-4 mt-4 sm:mt-0">
          <select
            value={selectedMonth}
            onChange={(e) => setSelectedMonth(parseInt(e.target.value))}
            className="px-3 py-2 bg-black border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white"
          >
            {Array.from({ length: 12 }, (_, i) => i + 1).map(month => (
              <option key={month} value={month}>M√™s {month}</option>
            ))}
          </select>
          
          <select
            value={selectedYear}
            onChange={(e) => setSelectedYear(parseInt(e.target.value))}
            className="px-3 py-2 bg-black border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white"
          >
            {Array.from({ length: 5 }, (_, i) => new Date().getFullYear() - i).map(year => (
              <option key={year} value={year}>{year}</option>
            ))}
          </select>
        </div>
      </div>

      {loading ? (
        <div className="flex items-center justify-center py-12">
          <div className="text-center">
            <div className="w-12 h-12 border-4 border-gray-800 border-t-white rounded-full animate-spin mx-auto"></div>
            <p className="mt-4 text-gray-400">Carregando dados...</p>
          </div>
        </div>
      ) : (
        <>
          {/* KPI Cards */}
          <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <div className="bg-gray-900 border border-gray-800 rounded-2xl p-6">
              <div className="flex items-center justify-between">
                <div>
                  <p className="text-gray-400 text-sm">Despesas do M√™s</p>
                  <p className="text-2xl font-bold mt-1">
                    R$ {dashboard?.monthlyExpenses?.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}
                  </p>
                </div>
                <div className="w-12 h-12 bg-white rounded-lg flex items-center justify-center">
                  <svg className="w-6 h-6 text-black" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M8.433 7.418c.155-.103.346-.196.567-.267v1.698a2.305 2.305 0 01-.567-.267C8.07 8.34 8 8.114 8 8c0-.114.07-.34.433-.582zM11 12.849v-1.698c.22.071.412.164.567.267.364.243.433.468.433.582 0 .114-.07.34-.433.582a2.305 2.305 0 01-.567.267z"/>
                    <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.348 6 7.007 6 8c0 .993.602 1.652 1.324 1.958A4.507 4.507 0 008 11.092V12a1 1 0 102 0v-.908c1.222-.256 2.132-.94 2.616-1.853A4.5 4.5 0 0014 8c0-.993-.602-1.652-1.324-1.958A4.5 4.5 0 0011 5.092V5z" clipRule="evenodd"/>
                  </svg>
                </div>
              </div>
            </div>

            <div className="bg-gray-900 border border-gray-800 rounded-2xl p-6">
              <div className="flex items-center justify-between">
                <div>
                  <p className="text-gray-400 text-sm">Despesas do Ano</p>
                  <p className="text-2xl font-bold mt-1">
                    R$ {dashboard?.yearlyExpenses?.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}
                  </p>
                </div>
                <div className="w-12 h-12 bg-white rounded-lg flex items-center justify-center">
                  <svg className="w-6 h-6 text-black" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4zM18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9zM4 13a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm5-1a1 1 0 100 2h1a1 1 0 100-2H9z"/>
                  </svg>
                </div>
              </div>
            </div>

            <div className="bg-gray-900 border border-gray-800 rounded-2xl p-6">
              <div className="flex items-center justify-between">
                <div>
                  <p className="text-gray-400 text-sm">M√©dia Mensal</p>
                  <p className="text-2xl font-bold mt-1">
                    R$ {dashboard ? (dashboard.yearlyExpenses / 12).toLocaleString('pt-BR', { minimumFractionDigits: 2 }) : '0,00'}
                  </p>
                </div>
                <div className="w-12 h-12 bg-white rounded-lg flex items-center justify-center">
                  <svg className="w-6 h-6 text-black" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M2 10a8 8 0 018-8v8h8a8 8 0 11-16 0z"/>
                    <path d="M12 2.252A8.014 8.014 0 0117.748 8H12V2.252z"/>
                  </svg>
                </div>
              </div>
            </div>
          </div>

          {/* Charts Grid */}
          <div className="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
            <div className="bg-gray-900 border border-gray-800 rounded-2xl p-6">
              <h3 className="text-lg font-semibold mb-4">Despesas por Categoria</h3>
              <div className="chart-container">
                <Bar data={barChartData} options={chartOptions} />
              </div>
            </div>

            <div className="bg-gray-900 border border-gray-800 rounded-2xl p-6">
              <h3 className="text-lg font-semibold mb-4">Comparativo Mensal</h3>
              <div className="chart-container">
                <Line data={lineChartData} options={chartOptions} />
              </div>
            </div>
          </div>

          {/* Additional Info */}
          <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <div className="lg:col-span-2 bg-gray-900 border border-gray-800 rounded-2xl p-6">
              <h3 className="text-lg font-semibold mb-4">Resumo</h3>
              <div className="space-y-4">
                <div className="flex justify-between items-center p-4 bg-black border border-gray-800 rounded-lg">
                  <span className="text-gray-300">Total de Categorias</span>
                  <span className="font-semibold">{dashboard?.expensesByCategory?.length || 0}</span>
                </div>
                <div className="flex justify-between items-center p-4 bg-black border border-gray-800 rounded-lg">
                  <span className="text-gray-300">Categoria com Maior Despesa</span>
                  <span className="font-semibold">
                    {dashboard?.expensesByCategory?.[0]?.category || 'Nenhuma'}
                  </span>
                </div>
                <div className="flex justify-between items-center p-4 bg-black border border-gray-800 rounded-lg">
                  <span className="text-gray-300">Categoria com Menor Despesa</span>
                  <span className="font-semibold">
                    {dashboard?.expensesByCategory?.[dashboard.expensesByCategory.length - 1]?.category || 'Nenhuma'}
                  </span>
                </div>
              </div>
            </div>

            <div className="bg-gray-900 border border-gray-800 rounded-2xl p-6">
              <h3 className="text-lg font-semibold mb-4">Distribui√ß√£o</h3>
              <div className="chart-container">
                <Doughnut data={doughnutChartData} options={{ responsive: true, plugins: { legend: { position: 'bottom', labels: { color: '#ffffff' } } } }} />
              </div>
            </div>
          </div>
        </>
      )}
    </div>
  )
}

export default Dashboard
</file>

<file path="client/src/components/AdminPanel.jsx">
import React, { useState, useEffect } from 'react'
import { api } from '../services/api'
import { toast } from 'react-hot-toast'

function AdminPanel() {
  const [users, setUsers] = useState([])
  const [stats, setStats] = useState(null)
  const [loading, setLoading] = useState(true)
  const [editingUser, setEditingUser] = useState(null)
  const [formData, setFormData] = useState({ email: '', password: '' })

  useEffect(() => {
    loadUsers()
    loadStats()
  }, [])

  const loadUsers = async () => {
    try {
      setLoading(true)
      const response = await api.get('/admin/users')
      setUsers(response.data)
    } catch (error) {
      toast.error('Erro ao carregar usu√°rios')
    } finally {
      setLoading(false)
    }
  }

  const loadStats = async () => {
    try {
      const response = await api.get('/admin/stats')
      setStats(response.data)
    } catch (error) {
      toast.error('Erro ao carregar estat√≠sticas')
    }
  }

  const handleEdit = (user) => {
    setEditingUser(user)
    setFormData({ email: user.email, password: '' })
  }

  const handleUpdateEmail = async () => {
    if (!formData.email) {
      toast.error('Digite um email v√°lido')
      return
    }

    try {
      await api.put(`/admin/users/${editingUser.id}/email`, { email: formData.email })
      toast.success('Email atualizado com sucesso')
      setEditingUser(null)
      loadUsers()
      loadStats()
    } catch (error) {
      toast.error(error.response?.data?.error || 'Erro ao atualizar email')
    }
  }

  const handleUpdatePassword = async () => {
    if (!formData.password || formData.password.length < 6) {
      toast.error('A senha deve ter pelo menos 6 caracteres')
      return
    }

    try {
      await api.put(`/admin/users/${editingUser.id}/password`, { password: formData.password })
      toast.success('Senha atualizada com sucesso')
      setFormData({ ...formData, password: '' })
      loadUsers()
      loadStats()
    } catch (error) {
      toast.error(error.response?.data?.error || 'Erro ao atualizar senha')
    }
  }

  const handleDeleteUser = async (user) => {
    if (!confirm(`Tem certeza que deseja excluir ${user.name}? Esta a√ß√£o n√£o pode ser desfeita.`)) {
      return
    }

    try {
      await api.delete(`/admin/users/${user.id}`)
      toast.success('Usu√°rio exclu√≠do com sucesso')
      loadUsers()
      loadStats()
    } catch (error) {
      toast.error(error.response?.data?.error || 'Erro ao excluir usu√°rio')
    }
  }

  return (
    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <div className="flex flex-col sm:flex-row justify-between items-center mb-8">
        <div>
          <h1 className="text-3xl font-bold">Painel Administrativo</h1>
          <p className="text-gray-400 mt-1">Gerencie os 20 usu√°rios membro</p>
        </div>
        
        <div className="flex items-center space-x-4 mt-4 sm:mt-0">
          <button
            onClick={() => { loadUsers(); loadStats(); }}
            className="px-4 py-2 border border-gray-600 text-white rounded-lg hover:border-white transition"
          >
            Atualizar
          </button>
        </div>
      </div>

      {/* Stats */}
      {stats && (
        <div className="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
          <div className="bg-gray-900 border border-gray-800 rounded-2xl p-6">
            <div className="flex items-center justify-between">
              <div>
                <p className="text-gray-400 text-sm">Total de Membros</p>
                <p className="text-2xl font-bold mt-1">{stats.totalMembers}</p>
              </div>
              <div className="w-12 h-12 bg-white rounded-lg flex items-center justify-center">
                <svg className="w-6 h-6 text-black" fill="currentColor" viewBox="0 0 20 20">
                  <path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"/>
                </svg>
              </div>
            </div>
          </div>

          <div className="bg-gray-900 border border-gray-800 rounded-2xl p-6">
            <div className="flex items-center justify-between">
              <div>
                <p className="text-gray-400 text-sm">Total de Despesas</p>
                <p className="text-2xl font-bold mt-1">{stats.totalExpenses}</p>
              </div>
              <div className="w-12 h-12 bg-white rounded-lg flex items-center justify-center">
                <svg className="w-6 h-6 text-black" fill="currentColor" viewBox="0 0 20 20">
                  <path d="M8.433 7.418c.155-.103.346-.196.567-.267v1.698a2.305 2.305 0 01-.567-.267C8.07 8.34 8 8.114 8 8c0-.114.07-.34.433-.582zM11 12.849v-1.698c.22.071.412.164.567.267.364.243.433.468.433.582 0 .114-.07.34-.433.582a2.305 2.305 0 01-.567.267z"/>
                  <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.348 6 7.007 6 8c0 .993.602 1.652 1.324 1.958A4.507 4.507 0 008 11.092V12a1 1 0 102 0v-.908c1.222-.256 2.132-.94 2.616-1.853A4.5 4.5 0 0014 8c0-.993-.602-1.652-1.324-1.958A4.5 4.5 0 0011 5.092V5z" clipRule="evenodd"/>
                </svg>
              </div>
            </div>
          </div>

          <div className="bg-gray-900 border border-gray-800 rounded-2xl p-6">
            <div className="flex items-center justify-between">
              <div>
                <p className="text-gray-400 text-sm">Total de Or√ßamentos</p>
                <p className="text-2xl font-bold mt-1">{stats.totalBudgets}</p>
              </div>
              <div className="w-12 h-12 bg-white rounded-lg flex items-center justify-center">
                <svg className="w-6 h-6 text-black" fill="currentColor" viewBox="0 0 20 20">
                  <path fillRule="evenodd" d="M12 7a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0V8.414l-4.293 4.293a1 1 0 01-1.414 0L8 10.414l-4.293 4.293a1 1 0 01-1.414-1.414l5-5a1 1 0 011.414 0L11 10.586 14.586 7H12z" clipRule="evenodd"/>
                </svg>
              </div>
            </div>
          </div>

          <div className="bg-gray-900 border border-gray-800 rounded-2xl p-6">
            <div className="flex items-center justify-between">
              <div>
                <p className="text-gray-400 text-sm">Valor Total</p>
                <p className="text-2xl font-bold mt-1">
                  R$ {stats.totalAmount?.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}
                </p>
              </div>
              <div className="w-12 h-12 bg-white rounded-lg flex items-center justify-center">
                <svg className="w-6 h-6 text-black" fill="currentColor" viewBox="0 0 20 20">
                  <path fillRule="evenodd" d="M4 4a2 2 0 00-2 2v4a2 2 0 002 2V6h10a2 2 0 00-2-2H4zm2 6a2 2 0 012-2h8a2 2 0 012 2v4a2 2 0 01-2 2H8a2 2 0 01-2-2v-4zm6-4a2 2 0 100 4 2 2 0 000-4z" clipRule="evenodd"/>
                </svg>
              </div>
            </div>
          </div>
        </div>
      )}

      {/* Users Table */}
      <div className="bg-gray-900 border border-gray-800 rounded-2xl">
        <div className="px-6 py-4 border-b border-gray-800">
          <h2 className="text-xl font-semibold">Usu√°rios Membro</h2>
        </div>
        
        <div className="table-container">
          <table className="w-full">
            <thead className="bg-gray-800 sticky top-0">
              <tr>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">ID</th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Nome</th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Email</th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Criado em</th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">A√ß√µes</th>
              </tr>
            </thead>
            <tbody className="divide-y divide-gray-800">
              {loading ? (
                <tr>
                  <td colSpan="5" className="px-6 py-12 text-center">
                    <div className="w-12 h-12 border-4 border-gray-800 border-t-white rounded-full animate-spin mx-auto"></div>
                    <p className="mt-4 text-gray-400">Carregando usu√°rios...</p>
                  </td>
                </tr>
              ) : users.length === 0 ? (
                <tr>
                  <td colSpan="5" className="px-6 py-12 text-center">
                    <p className="text-gray-400">Nenhum usu√°rio encontrado</p>
                  </td>
                </tr>
              ) : (
                users.map((user) => (
                  <tr key={user.id} className="hover:bg-gray-800">
                    <td className="px-6 py-4 whitespace-nowrap text-sm font-medium">{user.id}</td>
                    <td className="px-6 py-4 whitespace-nowrap text-sm">{user.name}</td>
                    <td className="px-6 py-4 whitespace-nowrap text-sm">{user.email}</td>
                    <td className="px-6 py-4 whitespace-nowrap text-sm">
                      {new Date(user.created_at).toLocaleDateString('pt-BR')}
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap text-sm font-medium">
                      <div className="flex space-x-2">
                        <button
                          onClick={() => handleEdit(user)}
                          className="text-gray-300 hover:text-white transition"
                        >
                          Editar
                        </button>
                        <button
                          onClick={() => handleDeleteUser(user)}
                          className="text-red-400 hover:text-red-300 transition"
                        >
                          Excluir
                        </button>
                      </div>
                    </td>
                  </tr>
                ))
              )}
            </tbody>
          </table>
        </div>
      </div>

      {/* Edit Modal */}
      {editingUser && (
        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
          <div className="bg-gray-900 border border-gray-800 rounded-2xl p-6 w-full max-w-md">
            <div className="flex justify-between items-center mb-4">
              <h3 className="text-lg font-semibold">Editar Usu√°rio</h3>
              <button
                onClick={() => setEditingUser(null)}
                className="text-gray-400 hover:text-white transition"
              >
                <svg className="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                  <path fillRule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clipRule="evenodd"/>
                </svg>
              </button>
            </div>

            <div className="space-y-4">
              <div>
                <label className="block text-sm font-medium text-gray-300 mb-2">Email</label>
                <input
                  type="email"
                  value={formData.email}
                  onChange={(e) => setFormData({ ...formData, email: e.target.value })}
                  className="w-full px-3 py-2 bg-black border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white"
                />
                <button
                  onClick={handleUpdateEmail}
                  className="mt-2 px-4 py-2 bg-white text-black rounded-lg font-semibold hover:bg-gray-200 transition"
                >
                  Atualizar Email
                </button>
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-300 mb-2">Nova Senha</label>
                <input
                  type="password"
                  value={formData.password}
                  onChange={(e) => setFormData({ ...formData, password: e.target.value })}
                  className="w-full px-3 py-2 bg-black border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white"
                  placeholder="Digite a nova senha"
                />
                <button
                  onClick={handleUpdatePassword}
                  className="mt-2 px-4 py-2 bg-white text-black rounded-lg font-semibold hover:bg-gray-200 transition"
                >
                  Atualizar Senha
                </button>
              </div>

              <div className="text-xs text-gray-400">
                <p><strong>Importante:</strong> As altera√ß√µes s√£o salvas automaticamente no banco de dados SQLite.</p>
              </div>
            </div>
          </div>
        </div>
      )}
    </div>
  )
}

export default AdminPanel
</file>

<file path="client/src/components/Profile.jsx">
import React, { useState, useEffect } from 'react'
import { api } from '../services/api'
import { toast } from 'react-hot-toast'

function Profile() {
  const [user, setUser] = useState(null)
  const [loading, setLoading] = useState(true)
  const [formData, setFormData] = useState({ name: '', email: '' })
  const [passwordForm, setPasswordForm] = useState({ currentPassword: '', newPassword: '', confirmPassword: '' })

  useEffect(() => {
    loadUserProfile()
  }, [])

  const loadUserProfile = async () => {
    try {
      setLoading(true)
      const response = await api.get('/auth/me')
      setUser(response.data)
      setFormData({
        name: response.data.name,
        email: response.data.email
      })
    } catch (error) {
      toast.error('Erro ao carregar perfil')
    } finally {
      setLoading(false)
    }
  }

  const handleUpdateProfile = async (e) => {
    e.preventDefault()
    
    try {
      await api.put('/auth/profile', formData)
      toast.success('Perfil atualizado com sucesso')
      loadUserProfile()
    } catch (error) {
      toast.error(error.response?.data?.error || 'Erro ao atualizar perfil')
    }
  }

  const handleUpdatePassword = async (e) => {
    e.preventDefault()
    
    if (passwordForm.newPassword !== passwordForm.confirmPassword) {
      toast.error('As senhas n√£o coincidem')
      return
    }

    if (passwordForm.newPassword.length < 6) {
      toast.error('A senha deve ter pelo menos 6 caracteres')
      return
    }

    try {
      await api.put('/auth/password', passwordForm)
      toast.success('Senha atualizada com sucesso')
      setPasswordForm({ currentPassword: '', newPassword: '', confirmPassword: '' })
    } catch (error) {
      toast.error(error.response?.data?.error || 'Erro ao atualizar senha')
    }
  }

  if (loading) {
    return (
      <div className="flex items-center justify-center py-12">
        <div className="text-center">
          <div className="w-12 h-12 border-4 border-gray-800 border-t-white rounded-full animate-spin mx-auto"></div>
          <p className="mt-4 text-gray-400">Carregando perfil...</p>
        </div>
      </div>
    )
  }

  return (
    <div className="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <div className="flex flex-col sm:flex-row justify-between items-center mb-8">
        <div>
          <h1 className="text-3xl font-bold">Perfil do Usu√°rio</h1>
          <p className="text-gray-400 mt-1">Gerencie suas informa√ß√µes e configura√ß√µes</p>
        </div>
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
        {/* Profile Info */}
        <div className="bg-gray-900 border border-gray-800 rounded-2xl p-6">
          <h2 className="text-xl font-semibold mb-4">Informa√ß√µes Pessoais</h2>
          
          <form onSubmit={handleUpdateProfile} className="space-y-4">
            <div>
              <label className="block text-sm font-medium text-gray-300 mb-2">Nome Completo</label>
              <input
                type="text"
                value={formData.name}
                onChange={(e) => setFormData({ ...formData, name: e.target.value })}
                className="w-full px-3 py-2 bg-black border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white"
                required
              />
            </div>

            <div>
              <label className="block text-sm font-medium text-gray-300 mb-2">Email</label>
              <input
                type="email"
                value={formData.email}
                onChange={(e) => setFormData({ ...formData, email: e.target.value })}
                className="w-full px-3 py-2 bg-black border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white"
                required
              />
            </div>

            <div className="flex items-center space-x-4">
              <button
                type="submit"
                className="px-6 py-2 bg-white text-black rounded-lg font-semibold hover:bg-gray-200 transition"
              >
                Atualizar Perfil
              </button>
              
              <span className={`px-3 py-1 rounded-full text-xs font-semibold ${
                user.role === 'admin' ? 'bg-purple-100 text-purple-800' : 'bg-green-100 text-green-800'
              }`}>
                {user.role === 'admin' ? 'Administrador' : 'Membro'}
              </span>
            </div>
          </form>

          <div className="mt-6 p-4 bg-black border border-gray-800 rounded-lg">
            <h3 className="font-semibold mb-2">Detalhes da Conta</h3>
            <div className="text-sm text-gray-400 space-y-1">
              <p><strong>ID:</strong> {user.id}</p>
              <p><strong>Criado em:</strong> {new Date(user.created_at).toLocaleDateString('pt-BR')}</p>
              <p><strong>√öltima atualiza√ß√£o:</strong> {new Date(user.updated_at).toLocaleDateString('pt-BR')}</p>
            </div>
          </div>
        </div>

        {/* Password Change */}
        <div className="bg-gray-900 border border-gray-800 rounded-2xl p-6">
          <h2 className="text-xl font-semibold mb-4">Alterar Senha</h2>
          
          <form onSubmit={handleUpdatePassword} className="space-y-4">
            <div>
              <label className="block text-sm font-medium text-gray-300 mb-2">Senha Atual</label>
              <input
                type="password"
                value={passwordForm.currentPassword}
                onChange={(e) => setPasswordForm({ ...passwordForm, currentPassword: e.target.value })}
                className="w-full px-3 py-2 bg-black border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white"
                required
              />
            </div>

            <div>
              <label className="block text-sm font-medium text-gray-300 mb-2">Nova Senha</label>
              <input
                type="password"
                value={passwordForm.newPassword}
                onChange={(e) => setPasswordForm({ ...passwordForm, newPassword: e.target.value })}
                className="w-full px-3 py-2 bg-black border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white"
                required
                minLength="6"
              />
            </div>

            <div>
              <label className="block text-sm font-medium text-gray-300 mb-2">Confirmar Nova Senha</label>
              <input
                type="password"
                value={passwordForm.confirmPassword}
                onChange={(e) => setPasswordForm({ ...passwordForm, confirmPassword: e.target.value })}
                className="w-full px-3 py-2 bg-black border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white"
                required
                minLength="6"
              />
            </div>

            <button
              type="submit"
              className="px-6 py-2 bg-white text-black rounded-lg font-semibold hover:bg-gray-200 transition"
            >
              Atualizar Senha
            </button>
          </form>

          <div className="mt-6 p-4 bg-black border border-gray-800 rounded-lg">
            <h3 className="font-semibold mb-2">Seguran√ßa</h3>
            <ul className="text-sm text-gray-400 space-y-2">
              <li>‚Ä¢ Use senhas fortes e √∫nicas</li>
              <li>‚Ä¢ N√£o compartilhe sua senha com ningu√©m</li>
              <li>‚Ä¢ Altere sua senha periodicamente</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  )
}

export default Profile
</file>

<file path="client/src/components/Expenses.jsx">
import React, { useState, useEffect } from 'react'
import { api } from '../services/api'
import { toast } from 'react-hot-toast'

function Expenses() {
  const [expenses, setExpenses] = useState([])
  const [loading, setLoading] = useState(true)
  const [formData, setFormData] = useState({
    description: '',
    amount: '',
    category: '',
    date: new Date().toISOString().split('T')[0]
  })
  const [editingExpense, setEditingExpense] = useState(null)

  const categories = [
    'Alimenta√ß√£o',
    'Transporte',
    'Tecnologia',
    'Marketing',
    'Viagens',
    'Treinamento',
    'Infraestrutura',
    'Escrit√≥rio',
    'Outros'
  ]

  useEffect(() => {
    loadExpenses()
  }, [])

  const loadExpenses = async () => {
    try {
      setLoading(true)
      const response = await api.get('/finance/expenses')
      setExpenses(response.data)
    } catch (error) {
      toast.error('Erro ao carregar despesas')
    } finally {
      setLoading(false)
    }
  }

  const handleSubmit = async (e) => {
    e.preventDefault()
    
    if (!formData.description || !formData.amount || !formData.category || !formData.date) {
      toast.error('Preencha todos os campos')
      return
    }

    try {
      await api.post('/finance/expenses', formData)
      toast.success('Despesa adicionada com sucesso')
      setFormData({
        description: '',
        amount: '',
        category: '',
        date: new Date().toISOString().split('T')[0]
      })
      loadExpenses()
    } catch (error) {
      toast.error('Erro ao adicionar despesa')
    }
  }

  const handleUpdate = async (e) => {
    e.preventDefault()
    
    try {
      await api.put(`/finance/expenses/${editingExpense.id}`, {
        ...formData
      })
      toast.success('Despesa atualizada com sucesso')
      setEditingExpense(null)
      loadExpenses()
    } catch (error) {
      toast.error('Erro ao atualizar despesa')
    }
  }

  const handleDelete = async (expense) => {
    if (!confirm('Tem certeza que deseja excluir esta despesa?')) {
      return
    }

    try {
      await api.delete(`/finance/expenses/${expense.id}`)
      toast.success('Despesa exclu√≠da com sucesso')
      loadExpenses()
    } catch (error) {
      toast.error('Erro ao excluir despesa')
    }
  }

  const handleEdit = (expense) => {
    setEditingExpense(expense)
    setFormData({
      description: expense.description,
      amount: expense.amount,
      category: expense.category,
      date: expense.date.split('T')[0]
    })
  }

  const totalExpenses = expenses.reduce((sum, expense) => sum + expense.amount, 0)

  return (
    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <div className="flex flex-col sm:flex-row justify-between items-center mb-8">
        <div>
          <h1 className="text-3xl font-bold">Controle de Despesas</h1>
          <p className="text-gray-400 mt-1">Gerencie e acompanhe todas as suas despesas</p>
        </div>
        
        <div className="flex items-center space-x-4 mt-4 sm:mt-0">
          <div className="text-right">
            <p className="text-gray-400 text-sm">Total de Despesas</p>
            <p className="text-2xl font-bold">
              R$ {totalExpenses.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}
            </p>
          </div>
        </div>
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
        {/* Form */}
        <div className="lg:col-span-1">
          <div className="bg-gray-900 border border-gray-800 rounded-2xl p-6">
            <h2 className="text-xl font-semibold mb-4">
              {editingExpense ? 'Editar Despesa' : 'Adicionar Despesa'}
            </h2>
            
            <form onSubmit={editingExpense ? handleUpdate : handleSubmit} className="space-y-4">
              <div>
                <label className="block text-sm font-medium text-gray-300 mb-2">Descri√ß√£o</label>
                <input
                  type="text"
                  value={formData.description}
                  onChange={(e) => setFormData({ ...formData, description: e.target.value })}
                  className="w-full px-3 py-2 bg-black border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white"
                  placeholder="Descri√ß√£o da despesa"
                  required
                />
              </div>

              <div className="grid grid-cols-2 gap-4">
                <div>
                  <label className="block text-sm font-medium text-gray-300 mb-2">Valor</label>
                  <input
                    type="number"
                    step="0.01"
                    value={formData.amount}
                    onChange={(e) => setFormData({ ...formData, amount: e.target.value })}
                    className="w-full px-3 py-2 bg-black border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white"
                    placeholder="0,00"
                    required
                  />
                </div>

                <div>
                  <label className="block text-sm font-medium text-gray-300 mb-2">Data</label>
                  <input
                    type="date"
                    value={formData.date}
                    onChange={(e) => setFormData({ ...formData, date: e.target.value })}
                    className="w-full px-3 py-2 bg-black border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white"
                    required
                  />
                </div>
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-300 mb-2">Categoria</label>
                <select
                  value={formData.category}
                  onChange={(e) => setFormData({ ...formData, category: e.target.value })}
                  className="w-full px-3 py-2 bg-black border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white"
                  required
                >
                  <option value="">Selecione uma categoria</option>
                  {categories.map(category => (
                    <option key={category} value={category}>{category}</option>
                  ))}
                </select>
              </div>

              <div className="flex items-center space-x-4">
                <button
                  type="submit"
                  className="flex-1 px-4 py-2 bg-white text-black rounded-lg font-semibold hover:bg-gray-200 transition"
                >
                  {editingExpense ? 'Atualizar Despesa' : 'Adicionar Despesa'}
                </button>
                
                {editingExpense && (
                  <button
                    type="button"
                    onClick={() => { setEditingExpense(null); setFormData({ description: '', amount: '', category: '', date: new Date().toISOString().split('T')[0] }); }}
                    className="px-4 py-2 border border-gray-600 text-white rounded-lg hover:border-white transition"
                  >
                    Cancelar
                  </button>
                )}
              </div>
            </form>
          </div>
        </div>

        {/* List */}
        <div className="lg:col-span-2">
          <div className="bg-gray-900 border border-gray-800 rounded-2xl">
            <div className="px-6 py-4 border-b border-gray-800">
              <h2 className="text-xl font-semibold">Despesas Registradas</h2>
            </div>
            
            <div className="table-container">
              <table className="w-full">
                <thead className="bg-gray-800 sticky top-0">
                  <tr>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Descri√ß√£o</th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Valor</th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Categoria</th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Data</th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">A√ß√µes</th>
                  </tr>
                </thead>
                <tbody className="divide-y divide-gray-800">
                  {loading ? (
                    <tr>
                      <td colSpan="5" className="px-6 py-12 text-center">
                        <div className="w-12 h-12 border-4 border-gray-800 border-t-white rounded-full animate-spin mx-auto"></div>
                        <p className="mt-4 text-gray-400">Carregando despesas...</p>
                      </td>
                    </tr>
                  ) : expenses.length === 0 ? (
                    <tr>
                      <td colSpan="5" className="px-6 py-12 text-center">
                        <p className="text-gray-400">Nenhuma despesa registrada</p>
                      </td>
                    </tr>
                  ) : (
                    expenses.map((expense) => (
                      <tr key={expense.id} className="hover:bg-gray-800">
                        <td className="px-6 py-4 whitespace-nowrap text-sm">{expense.description}</td>
                        <td className="px-6 py-4 whitespace-nowrap text-sm font-semibold">
                          R$ {expense.amount.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}
                        </td>
                        <td className="px-6 py-4 whitespace-nowrap text-sm">
                          <span className="px-2 py-1 bg-black border border-gray-700 rounded-full text-xs">
                            {expense.category}
                          </span>
                        </td>
                        <td className="px-6 py-4 whitespace-nowrap text-sm">
                          {new Date(expense.date).toLocaleDateString('pt-BR')}
                        </td>
                        <td className="px-6 py-4 whitespace-nowrap text-sm font-medium">
                          <div className="flex space-x-2">
                            <button
                              onClick={() => handleEdit(expense)}
                              className="text-gray-300 hover:text-white transition"
                            >
                              Editar
                            </button>
                            <button
                              onClick={() => handleDelete(expense)}
                              className="text-red-400 hover:text-red-300 transition"
                            >
                              Excluir
                            </button>
                          </div>
                        </td>
                      </tr>
                    ))
                  )}
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  )
}

export default Expenses
</file>

<file path="client/src/components/Budgets.jsx">
import React, { useState, useEffect } from 'react'
import { api } from '../services/api'
import { toast } from 'react-hot-toast'

function Budgets() {
  const [budgets, setBudgets] = useState([])
  const [loading, setLoading] = useState(true)
  const [formData, setFormData] = useState({
    category: '',
    amount: '',
    month: new Date().getMonth() + 1,
    year: new Date().getFullYear()
  })

  const categories = [
    'Alimenta√ß√£o',
    'Transporte',
    'Tecnologia',
    'Marketing',
    'Viagens',
    'Treinamento',
    'Infraestrutura',
    'Escrit√≥rio',
    'Outros'
  ]

  useEffect(() => {
    loadBudgets()
  }, [])

  const loadBudgets = async () => {
    try {
      setLoading(true)
      const response = await api.get('/finance/budgets')
      setBudgets(response.data)
    } catch (error) {
      toast.error('Erro ao carregar or√ßamentos')
    } finally {
      setLoading(false)
    }
  }

  const handleSubmit = async (e) => {
    e.preventDefault()
    
    if (!formData.category || !formData.amount || !formData.month || !formData.year) {
      toast.error('Preencha todos os campos')
      return
    }

    try {
      await api.post('/finance/budgets', formData)
      toast.success('Or√ßamento adicionado com sucesso')
      setFormData({
        category: '',
        amount: '',
        month: new Date().getMonth() + 1,
        year: new Date().getFullYear()
      })
      loadBudgets()
    } catch (error) {
      toast.error(error.response?.data?.error || 'Erro ao adicionar or√ßamento')
    }
  }

  const handleDelete = async (budget) => {
    if (!confirm('Tem certeza que deseja excluir este or√ßamento?')) {
      return
    }

    try {
      await api.delete(`/finance/budgets/${budget.id}`)
      toast.success('Or√ßamento exclu√≠do com sucesso')
      loadBudgets()
    } catch (error) {
      toast.error('Erro ao excluir or√ßamento')
    }
  }

  const totalBudgets = budgets.reduce((sum, budget) => sum + budget.amount, 0)

  return (
    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <div className="flex flex-col sm:flex-row justify-between items-center mb-8">
        <div>
          <h1 className="text-3xl font-bold">Controle de Or√ßamentos</h1>
          <p className="text-gray-400 mt-1">Defina e gerencie seus limites de gastos</p>
        </div>
        
        <div className="flex items-center space-x-4 mt-4 sm:mt-0">
          <div className="text-right">
            <p className="text-gray-400 text-sm">Total Or√ßamentado</p>
            <p className="text-2xl font-bold">
              R$ {totalBudgets.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}
            </p>
          </div>
        </div>
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
        {/* Form */}
        <div className="lg:col-span-1">
          <div className="bg-gray-900 border border-gray-800 rounded-2xl p-6">
            <h2 className="text-xl font-semibold mb-4">Adicionar Or√ßamento</h2>
            
            <form onSubmit={handleSubmit} className="space-y-4">
              <div>
                <label className="block text-sm font-medium text-gray-300 mb-2">Categoria</label>
                <select
                  value={formData.category}
                  onChange={(e) => setFormData({ ...formData, category: e.target.value })}
                  className="w-full px-3 py-2 bg-black border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white"
                  required
                >
                  <option value="">Selecione uma categoria</option>
                  {categories.map(category => (
                    <option key={category} value={category}>{category}</option>
                  ))}
                </select>
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-300 mb-2">Valor</label>
                <input
                  type="number"
                  step="0.01"
                  value={formData.amount}
                  onChange={(e) => setFormData({ ...formData, amount: e.target.value })}
                  className="w-full px-3 py-2 bg-black border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white"
                  placeholder="0,00"
                  required
                />
              </div>

              <div className="grid grid-cols-2 gap-4">
                <div>
                  <label className="block text-sm font-medium text-gray-300 mb-2">M√™s</label>
                  <select
                    value={formData.month}
                    onChange={(e) => setFormData({ ...formData, month: e.target.value })}
                    className="w-full px-3 py-2 bg-black border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white"
                    required
                  >
                    {Array.from({ length: 12 }, (_, i) => i + 1).map(month => (
                      <option key={month} value={month}>M√™s {month}</option>
                    ))}
                  </select>
                </div>

                <div>
                  <label className="block text-sm font-medium text-gray-300 mb-2">Ano</label>
                  <select
                    value={formData.year}
                    onChange={(e) => setFormData({ ...formData, year: e.target.value })}
                    className="w-full px-3 py-2 bg-black border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white"
                    required
                  >
                    {Array.from({ length: 5 }, (_, i) => new Date().getFullYear() - i).map(year => (
                      <option key={year} value={year}>{year}</option>
                    ))}
                  </select>
                </div>
              </div>

              <button
                type="submit"
                className="w-full px-4 py-2 bg-white text-black rounded-lg font-semibold hover:bg-gray-200 transition"
              >
                Adicionar Or√ßamento
              </button>
            </form>

            <div className="mt-6 p-4 bg-black border border-gray-800 rounded-lg">
              <h3 className="font-semibold mb-2">Dicas</h3>
              <ul className="text-sm text-gray-400 space-y-2">
                <li>‚Ä¢ Defina or√ßamentos realistas</li>
                <li>‚Ä¢ Revise periodicamente seus limites</li>
                <li>‚Ä¢ Compare com os gastos reais</li>
              </ul>
            </div>
          </div>
        </div>

        {/* List */}
        <div className="lg:col-span-2">
          <div className="bg-gray-900 border border-gray-800 rounded-2xl">
            <div className="px-6 py-4 border-b border-gray-800">
              <h2 className="text-xl font-semibold">Or√ßamentos Registrados</h2>
            </div>
            
            <div className="table-container">
              <table className="w-full">
                <thead className="bg-gray-800 sticky top-0">
                  <tr>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Categoria</th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Valor</th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">M√™s</th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Ano</th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">A√ß√µes</th>
                  </tr>
                </thead>
                <tbody className="divide-y divide-gray-800">
                  {loading ? (
                    <tr>
                      <td colSpan="5" className="px-6 py-12 text-center">
                        <div className="w-12 h-12 border-4 border-gray-800 border-t-white rounded-full animate-spin mx-auto"></div>
                        <p className="mt-4 text-gray-400">Carregando or√ßamentos...</p>
                      </td>
                    </tr>
                  ) : budgets.length === 0 ? (
                    <tr>
                      <td colSpan="5" className="px-6 py-12 text-center">
                        <p className="text-gray-400">Nenhum or√ßamento registrado</p>
                      </td>
                    </tr>
                  ) : (
                    budgets.map((budget) => (
                      <tr key={budget.id} className="hover:bg-gray-800">
                        <td className="px-6 py-4 whitespace-nowrap text-sm">
                          <span className="px-2 py-1 bg-black border border-gray-700 rounded-full text-xs">
                            {budget.category}
                          </span>
                        </td>
                        <td className="px-6 py-4 whitespace-nowrap text-sm font-semibold">
                          R$ {budget.amount.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}
                        </td>
                        <td className="px-6 py-4 whitespace-nowrap text-sm">M√™s {budget.month}</td>
                        <td className="px-6 py-4 whitespace-nowrap text-sm">{budget.year}</td>
                        <td className="px-6 py-4 whitespace-nowrap text-sm font-medium">
                          <button
                            onClick={() => handleDelete(budget)}
                            className="text-red-400 hover:text-red-300 transition"
                          >
                            Excluir
                          </button>
                        </td>
                      </tr>
                    ))
                  )}
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  )
}

export default Budgets
</file>

<file path="client/tailwind.config.js">
/** @type {import('tailwindcss').Config} */
export default {
  content: [
    "./index.html",
    "./src/**/*.{js,ts,jsx,tsx}",
  ],
  theme: {
    extend: {
      colors: {
        primary: {
          900: '#000000',
          100: '#ffffff'
        }
      }
    },
  },
  plugins: [],
}
</file>

<file path="client/postcss.config.js">
export default {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
}
</file>

<file path="README.md">
# CRM Financeiro

Sistema completo de CRM com dashboards financeiros, gerenciamento de usu√°rios e banco de dados SQL integrado.

## Funcionalidades

### Dashboard Financeiro
- **Gr√°ficos em tempo real**: Despesas mensais, por categoria e comparativo
- **KPIs**: Total de despesas, m√©dia mensal, categorias
- **Atualiza√ß√£o autom√°tica**: Dados atualizados em tempo real

### Gerenciamento de Usu√°rios
- **20 contas membro** pr√©-configuradas
- **1 conta administradora**
- **Controle total**: Alterar emails e senhas
- **Atualiza√ß√£o autom√°tica** no banco de dados

### Banco de Dados
- **SQLite integrado**: F√°cil configura√ß√£o
- **Estrutura completa**: Usu√°rios, despesas, or√ßamentos
- **Relacionamentos**: Chaves estrangeiras e constraints

### Seguran√ßa
- **Autentica√ß√£o JWT**: Tokens de acesso seguros
- **Criptografia de senhas**: bcrypt
- **Valida√ß√£o de dados**: Campos obrigat√≥rios e formatos

## Tecnologias

### Frontend (React)
- **React 18**: Biblioteca de interface
- **Vite**: Build tool r√°pido
- **Tailwind CSS**: Estiliza√ß√£o
- **Chart.js**: Gr√°ficos interativos
- **React Router**: Navega√ß√£o

### Backend (Node.js)
- **Express**: Framework web
- **SQLite3**: Banco de dados
- **bcryptjs**: Criptografia de senhas
- **jsonwebtoken**: Autentica√ß√£o JWT
- **CORS**: Comunica√ß√£o segura

## Instala√ß√£o

### Pr√©-requisitos
- Node.js (vers√£o 16 ou superior)
- npm ou yarn

### Passo a passo

1. **Clone o reposit√≥rio**
   ```bash
   git clone <seu-repositorio>
   cd crm-financeiro
   ```

2. **Instale as depend√™ncias**
   ```bash
   npm install
   npm run install:client
   ```

3. **Inicie o servidor**
   ```bash
   npm run dev
   ```

4. **Acesse o sistema**
   - Frontend: http://localhost:3000
   - Backend: http://localhost:3001/api

## Estrutura de Arquivos

```
crm-financeiro/
‚îú‚îÄ‚îÄ client/                 # Frontend React
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/     # Componentes React
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks/         # Hooks personalizados
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/      # Servi√ßos de API
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ App.jsx        # App principal